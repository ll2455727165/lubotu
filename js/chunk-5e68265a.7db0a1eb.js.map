{"version":3,"sources":["webpack:///./src/views/main/my/my.vue","webpack:///./src/views/main/my/my.js","webpack:///./src/views/main/my/my.vue?2539","webpack:///./src/views/main/my/my.vue?8c30"],"names":["class","style","userInfo","userBg","after-read","uploadBg","src","userImg","alt","nickName","desc","listData","item","index","title","is-link","to","name","key","defineComponent","setup","state","reactive","methodes","getUserInfo","onMounted","toRefs","getRequest","url","findMy","then","code","result","Reflect","set","catch","err","console","log","file","type","size","fileType","split","includes","Toast","join","fileSize","base64","content","replace","postRequest","updateUserBg","imgType","serverBase64Img","msg","__exports__","render"],"mappings":"sJACSA,MAAM,M,GAIFA,MAAM,W,GACFA,MAAM,gB,GACFA,MAAM,iB,aAGNA,MAAM,kB,GACFA,MAAM,kB,GACNA,MAAM,kB,GAKdA,MAAM,gB,kHAhBnB,eAqBM,MArBN,EAqBM,CApBF,eAEM,OAFDA,MAAM,QAASC,MAAK,+CAA6B,EAAAC,SAASC,OAAtC,S,CACrB,eAA4D,GAA9CH,MAAM,eAAgBI,aAAY,EAAAC,U,2BAEpD,eAgBM,MAhBN,EAgBM,CAfF,eASM,MATN,EASM,CARF,eAEM,MAFN,EAEM,CADF,eAAuD,OAAlDL,MAAM,WAAYM,IAAK,EAAAJ,SAASK,QAASC,IAAI,I,YAEtD,eAIM,MAJN,EAIM,CAHF,eAAyD,MAAzD,EAAyD,eAA1B,EAAAN,SAASO,UAAQ,GAChD,eAA8F,MAA9F,EAA8F,eAAlD,IAAb,EAAAP,SAASQ,KAAI,iBAA4B,EAAAR,SAASQ,MAAI,OAK7F,eAEM,MAFN,EAEM,E,mBADF,eAAsG,2BAArE,EAAAC,UAAQ,SAAvBC,EAAKC,G,wBAAvB,eAAsG,GAA1DC,MAAOF,EAAKE,MAAOC,UAAA,GAASC,GAAIJ,EAAKK,KAAOC,IAAKL,G,wLCd9FM,iBAAgB,CAC3BF,KAAK,KACLG,MAF2B,WAGvB,IAAIT,EAAW,CACX,CACIG,MAAO,OACPG,KAAM,WAEV,CACIH,MAAO,OACPG,KAAM,SAEV,CACIH,MAAO,OACPG,KAAM,QAEV,CACIH,MAAO,OACPG,KAAM,WAEV,CACIH,MAAO,OACPG,KAAM,WAIVI,EAAQC,eAAS,CACjBpB,SAAU,KAId,EAA6BqB,EAASF,GAAjCG,EAAL,EAAKA,YAAYnB,EAAjB,EAAiBA,SAMjB,OAJAoB,gBAAU,WACND,OAGJ,+BACIb,YACGe,eAAOL,IAFd,IAGIhB,gBAMZ,SAASkB,EAAUF,GAEf,IAAIG,EAAc,WACdG,eAAWC,OAAIC,QAAQC,MAAK,YAAsB,IAApBC,EAAoB,EAApBA,KAAoB,IAAfC,cAAe,MAAR,GAAQ,EAC9C,GAAW,QAARD,EAAe,CACd,qBAAsBC,EAAtB,UAAK9B,OAAL,MAAgB,GAAhB,EACA+B,QAAQC,IAAIb,EAAM,WAAWnB,OAIlCiC,OAAM,SAACC,GACNC,QAAQC,IAAI,SAASF,OAIzB/B,EAAW,SAACkC,GACZ,IAAIC,EAAO,CAAC,MAAO,MAAO,MAAO,QAC7BC,EAAO,QAEPC,EAAWH,EAAKA,KAAKC,KAAKG,MAAM,KAAK,GACzC,IAAKH,EAAKI,SAASF,GAAW,OAAOG,eAAM,WAAD,OAAYL,EAAKM,KAAK,OAChE,IAAIC,EAAWR,EAAKA,KAAKE,KACzB,GAAIM,EAAWN,EAAO,OAAOI,eAAM,iBACnC,IAAIG,EAAST,EAAKU,QAAQC,QAAQ,iCAAkC,IAEpEC,eAAYvB,OAAIwB,aAAa,CAACC,QAASX,EAASY,gBAAiBN,IAASlB,MAAK,YAAuB,IAArBC,EAAqB,EAArBA,KAAK5B,EAAgB,EAAhBA,OAAOoD,EAAS,EAATA,IAC9E,QAARxB,GAAgBE,QAAQC,IAAIb,EAAMnB,SAAS,SAASC,GACvD0C,eAAMU,MACPpB,OAAM,SAACC,GACNC,QAAQC,IAAI,SAASF,OAK7B,MAAM,CACFZ,cACAnB,Y,mCC/ER,MAAMmD,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,oCCTf,W","file":"js/chunk-5e68265a.7db0a1eb.js","sourcesContent":["<template>\r\n    <div class=\"my\">\r\n        <div class=\"my-bg\" :style=\"{ backgroundImage: `url('${userInfo.userBg}')` }\">\r\n            <van-uploader class=\"my-bg-upload\" :after-read=\"uploadBg\" />\r\n        </div>\r\n        <div class=\"my-info\">\r\n            <div class=\"my-info-user\">\r\n                <div class=\"info-user-img\">\r\n                    <img class=\"auto-img\" :src=\"userInfo.userImg\" alt=\"\" />\r\n                </div> \r\n                <div class=\"info-user-info\">\r\n                    <div class=\"user-info-name\">{{ userInfo.nickName }}</div>\r\n                    <div class=\"user-info-desc\">{{ userInfo.desc == \"\" ? \"这家伙很懒，什么也没有留下！\" : userInfo.desc }}</div>\r\n\r\n                </div> \r\n            </div>\r\n\r\n            <div class=\"my-info-list\">\r\n                <van-cell v-for=\"(item,index) in listData\" :title=\"item.title\" is-link :to=\"item.name\" :key=\"index\" />\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export { default } from './my';\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import './my.less';\r\n</style>","import {reactive,toRefs,onMounted,defineComponent} from 'vue';\r\nimport {getRequest, postRequest} from '../../../request/api';\r\nimport url from '../../../request/url';\r\nimport {Toast} from 'vant';\r\nexport default defineComponent({\r\n    name:'my',\r\n    setup () {\r\n        let listData = [\r\n            {\r\n                title: \"个人资料\",\r\n                name: \"account\"\r\n            },\r\n            {\r\n                title: \"我的订单\",\r\n                name: \"order\"\r\n            },\r\n            {\r\n                title: \"我的收藏\",\r\n                name: \"like\"\r\n            },\r\n            {\r\n                title: \"地址管理\",\r\n                name: \"address\"\r\n            },\r\n            {\r\n                title: \"安全中心\",\r\n                name: \"secure\"\r\n            },\r\n        ]\r\n\r\n        let state = reactive({\r\n            userInfo: {}\r\n        })\r\n\r\n\r\n        let {getUserInfo,uploadBg} = methodes(state);\r\n\r\n        onMounted(() => {\r\n            getUserInfo();\r\n        })\r\n\r\n        return {\r\n            listData,\r\n            ...toRefs(state),\r\n            uploadBg\r\n        }\r\n    }\r\n})\r\n\r\n\r\nfunction methodes (state) {\r\n    //获取用户信息\r\n    let getUserInfo = () => {\r\n        getRequest(url.findMy).then(({code,result=[]}) => {\r\n            if(code == 'A001'){\r\n                let [userInfo = {}] = result;\r\n                Reflect.set(state,'userInfo',userInfo);\r\n            }else{\r\n\r\n            }\r\n        }).catch((err) => {\r\n            console.log(\"err==>\",err);\r\n        });\r\n    }\r\n    //背景图片上传\r\n    let uploadBg = (file) => {\r\n        let type = [\"gif\", \"png\", \"jpg\", \"jpeg\"];\r\n        let size = 1 * 1024 * 1024;\r\n        //判断文件类型\r\n        let fileType = file.file.type.split(\"/\")[1];\r\n        if (!type.includes(fileType)) return Toast(`文件类型只支持 ${type.join(\",\")}`);\r\n        let fileSize = file.file.size;\r\n        if (fileSize > size)  return Toast(`文件允许最大不能超过1MB`);\r\n        let base64 = file.content.replace(/^data:image\\/[A-Za-z]+;base64,/, \"\");\r\n\r\n        postRequest(url.updateUserBg,{imgType: fileType,serverBase64Img: base64}).then(({code,userBg,msg}) => {\r\n            if(code == 'I001') Reflect.set(state.userInfo,'userBg',userBg);\r\n            Toast(msg);\r\n        }).catch((err) => {\r\n            console.log(\"err==>\",err);\r\n        });\r\n           \r\n    };\r\n\r\n    return{\r\n        getUserInfo,\r\n        uploadBg\r\n    }\r\n}","import { render } from \"./my.vue?vue&type=template&id=1eadf1b4&scoped=true\"\nimport script from \"./my.vue?vue&type=script&lang=js\"\nexport * from \"./my.vue?vue&type=script&lang=js\"\n\nimport \"./my.vue?vue&type=style&index=0&id=1eadf1b4&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\xyResearch\\\\test\\\\vue3base\\\\node_modules\\\\_vue-loader@16.8.3@vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1eadf1b4\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/_vue-loader@16.8.3@vue-loader/dist/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/_vue-loader@16.8.3@vue-loader/dist/index.js??ref--1-1!./my.vue?vue&type=style&index=0&id=1eadf1b4&lang=less&scoped=true\""],"sourceRoot":""}