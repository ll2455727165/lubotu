{"version":3,"sources":["webpack:///./src/views/account/account.vue","webpack:///./src/views/account/account.js","webpack:///./src/views/account/account.vue?ff1a","webpack:///./src/views/account/account.vue?2daa","webpack:///./src/components/BgBox/index.vue?a553","webpack:///./src/components/BgBox/index.vue","webpack:///./src/components/BgBox/index.vue?d39f"],"names":["class","title","left-text","left-arrow","back","center","src","accountInfo","userImg","alt","after-read","uploadUserImg","value","userId","phone","nickName","input-align","maxlength","placeholder","updateNickName","desc","label","rows","autosize","type","show-word-limit","updateDesc","defineComponent","name","components","BgBox","setup","state","reactive","methodes","getAccountInfo","onMounted","toRefs","router","useRouter","getRequest","url","findAccountInfo","then","code","result","Reflect","set","catch","err","console","log","file","size","fileType","split","includes","Toast","join","fileSize","base64","content","replace","postRequest","updateAvatar","imgType","serverBase64Img","msg","get","__exports__","render"],"mappings":"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","file":"js/chunk-5e91b29a.5c753f91.js","sourcesContent":["<template>\r\n    <div class=\"account\">\r\n        <van-nav-bar title=\"个人资料\" left-text=\"返回\" left-arrow @click-left=\"back\" />\r\n        <bg-box>\r\n            <van-cell title=\"头像\" center>\r\n                <div class=\"account-user\"> \r\n                    <div class=\"user-img\">\r\n                        <img class=\"auto-img\" :src=\"accountInfo.userImg\" alt=\"\" />\r\n                        <van-uploader class=\"upload-box\" :after-read=\"uploadUserImg\" />\r\n                    </div>\r\n                </div>\r\n            </van-cell>\r\n            <van-cell title=\"用户id\" :value=\"accountInfo.userId\" />\r\n            <van-cell title=\"手机号\" :value=\"accountInfo.phone\" />\r\n            <van-cell title=\"昵称\" center>\r\n                <van-field v-model=\"accountInfo.nickName\" input-align=\"right\" maxlength=\"12\" placeholder=\"输入昵称\" @blur=\"updateNickName\" />\r\n            </van-cell>\r\n            <div class=\"account-desc-box\">\r\n                <div class=\"account-desc-content\">\r\n                    <van-field v-model=\"accountInfo.desc\" label=\"简介\" input-align=\"right\" rows=\"2\" autosize type=\"textarea\" maxlength=\"30\" placeholder=\"输入简介\" show-word-limit @blur=\"updateDesc\" />\r\n                </div>\r\n            </div>\r\n\r\n            \r\n        </bg-box>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export { default } from './account';\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    @import './account.less';\r\n</style>","import {reactive,toRefs,onMounted,defineComponent} from 'vue';\r\nimport {useRouter} from 'vue-router';\r\nimport {getRequest,postRequest} from '../../request/api';\r\nimport url from '../../request/url';\r\nimport {Toast} from 'vant';\r\nimport BgBox from '../../components/BgBox';\r\n\r\nexport default defineComponent({\r\n    name:'account',\r\n    components:{\r\n        BgBox\r\n    },\r\n    setup () {\r\n        let state = reactive({\r\n            accountInfo: {\r\n                nickName: \"\",\r\n                desc: \"\",\r\n                phone: \"\",\r\n                userId: \"\",\r\n                userImg:\"\"\r\n            },\r\n        })\r\n\r\n        let {back,getAccountInfo,uploadUserImg,updateNickName,updateDesc} = methodes(state);\r\n\r\n        onMounted(() => {\r\n            getAccountInfo();\r\n        })\r\n\r\n        return {\r\n            ...toRefs(state),\r\n            back,\r\n            uploadUserImg,\r\n            updateNickName,\r\n            updateDesc\r\n        }\r\n    }\r\n})\r\n\r\nfunction methodes (state) {\r\n    let router = useRouter();\r\n    let back = () => {\r\n        router.back();\r\n    }\r\n\r\n    let getAccountInfo = () => {\r\n        getRequest(url.findAccountInfo).then(({code,result=[]}) => {\r\n            if(code == \"B001\"){\r\n                let [accountInfo] = result;\r\n                Reflect.set(state,'accountInfo',{...state.accountInfo,...accountInfo});\r\n            }else{\r\n\r\n            }\r\n        }).catch((err) => {\r\n            console.log(\"err==>\",err);\r\n        });\r\n    }\r\n\r\n    let uploadUserImg = (file) => {\r\n        let type = [\"gif\", \"png\", \"jpg\", \"jpeg\"];\r\n        let size = 1 * 1024 * 1024;\r\n        //判断文件类型\r\n        let fileType = file.file.type.split(\"/\")[1];\r\n        if (!type.includes(fileType)) return Toast(`文件类型只支持 ${type.join(\",\")}`);\r\n        let fileSize = file.file.size;\r\n        if (fileSize > size)  return Toast(`文件允许最大不能超过1MB`);\r\n        let base64 = file.content.replace(/^data:image\\/[A-Za-z]+;base64,/, \"\");\r\n\r\n        postRequest(url.updateAvatar,{imgType: fileType,serverBase64Img: base64}).then(({code,userImg,msg}) => {\r\n            if(code == 'H001') Reflect.set(state.accountInfo,'userImg',userImg);\r\n            Toast(msg);\r\n        }).catch((err) => {\r\n            console.log(\"err==>\",err);\r\n        });\r\n    }\r\n\r\n    let updateNickName = () => {\r\n        if (!Reflect.get(state.accountInfo,'nickName')) return Toast(\"昵称不能为空\");\r\n        postRequest(url.updateNickName,{nickName: state.accountInfo.nickName}).then(({code,nickName,msg}) => {\r\n            if(code == 'C001') Reflect.set(state.accountInfo,'nickName',nickName);\r\n            Toast(msg);\r\n        }).catch((err) => {\r\n            console.log(\"err==>\",err);\r\n        });\r\n    }\r\n\r\n    let updateDesc = () => {\r\n        if (!Reflect.get(state.accountInfo,'desc')) return Toast(\"简介不能为空\");\r\n        postRequest(url.updateDesc,{desc: state.accountInfo.desc}).then(({code,desc,msg}) => {\r\n            if(code == 'D001') Reflect.set(state.accountInfo,'desc',desc);\r\n            Toast(msg);\r\n        }).catch((err) => {\r\n            console.log(\"err==>\",err);\r\n        });\r\n    }\r\n\r\n    return{\r\n        back,\r\n        getAccountInfo,\r\n        uploadUserImg,\r\n        updateNickName,\r\n        updateDesc\r\n    }\r\n}","import { render } from \"./account.vue?vue&type=template&id=0c992b7d&scoped=true\"\nimport script from \"./account.vue?vue&type=script&lang=js\"\nexport * from \"./account.vue?vue&type=script&lang=js\"\n\nimport \"./account.vue?vue&type=style&index=0&id=0c992b7d&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\xyResearch\\\\test\\\\vue3base\\\\node_modules\\\\_vue-loader@16.8.3@vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0c992b7d\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/_vue-loader@16.8.3@vue-loader/dist/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@16.8.3@vue-loader/dist/index.js??ref--1-1!./account.vue?vue&type=style&index=0&id=0c992b7d&lang=less&scoped=true\"","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/_vue-loader@16.8.3@vue-loader/dist/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@16.8.3@vue-loader/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=85424242&lang=less&scoped=true\"","<template>\r\n    <div class=\"bg-box\">\r\n        <div class=\"bg\"></div>\r\n        <div class=\"bg-content\">\r\n            <slot></slot>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {defineComponent} from 'vue'\r\nexport default defineComponent({\r\n    name:'bg-box',\r\n    setup () {\r\n        return {}\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .bg-box{\r\n        .bg{\r\n            height: 100px;\r\n            background-color: #ff4201;\r\n        }\r\n        .bg-content{\r\n            margin: 0 10px;\r\n            position: relative;\r\n            top: -20px;\r\n            background-color: #fff;\r\n            border-top-left-radius: 8px;\r\n            border-top-right-radius: 8px;\r\n            padding: 10px;\r\n        }\r\n    }\r\n</style>","import { render } from \"./index.vue?vue&type=template&id=85424242&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=85424242&lang=less&scoped=true\"\n\nimport exportComponent from \"E:\\\\xyResearch\\\\test\\\\vue3base\\\\node_modules\\\\_vue-loader@16.8.3@vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-85424242\"]])\n\nexport default __exports__"],"sourceRoot":""}